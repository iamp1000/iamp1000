name: Metrics
on:
  schedule: [{cron: "0 0 * * *"}] # Runs daily at midnight UTC
  workflow_dispatch: # Allows manual trigger
  push: {branches: main}
jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRIC_TOKEN_SHHH_IT_IS_A_SECRET }}
          filename: "metrics.svg"
          plugin_activity: yes
          plugin_activity_days: 14
          plugin_activity_limit: 5
          plugin_activity_filter: all
          plugin_community: yes
          plugin_community_limit: 5
          plugin_repositories: yes
          plugin_repositories_limit: 5
          plugin_languages: yes
          plugin_languages_limit: 10
          plugin_languages_details: percentage
          plugin_header: yes
          plugin_header_user: iamp1000
          base: header, activity, community, repositories, languages # Include all desired sections
          base_indepth: false # Minimize API load
